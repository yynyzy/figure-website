import{Y as $}from"./Yixiv-30bec923.js";import{d as b,y as F,s as H,r as v,z,v as M,A as Y,e as A,n as j,c as i,q,a as s,F as x,i as w,t as c,m as L,f as d,w as h,o as e,k as N,j as E,p as G,l as J,_ as K}from"./index-3b82e300.js";const S=p=>(G("data-v-4cfcfd48"),p=p(),J(),p),O={class:"wrapper"},Q={class:"illust-content"},X={class:"illust"},Z={class:"pages"},ss={class:"image-wrapper"},ts={class:"info"},es={class:"info-rang"},as={class:"title"},os=["innerHTML"],is={class:"translate-btn"},ls={class:"tags"},cs={key:0},rs={class:"tag"},ns={class:"count"},_s=S(()=>s("i",{class:"far fa-heart"},null,-1)),us={class:"num"},ds=S(()=>s("i",{class:"far fa-star"},null,-1)),hs={class:"num"},ps={class:"illust-aside"},vs={class:"user-box"},gs={class:"avatar"},ms=["src"],fs={class:"info"},ks={class:"ellipsis"},ys=["textContent"],xs={class:"others"},ws={class:"header"},Bs={class:"content"},Is={class:"other-list"},Cs=["src"],Ps=b({__name:"illust",setup(p){const{setNavigationBarActiveIndex:W}=F();W(-1);const g={otherWorks:"其他作品",moreWorks:"更多作品",translate:"翻译"},B=H(),m=v(!1),f=v([]),I=v([]),t=z({title:"",collect_total:0,like_total:0,desc:"",tags:[]}),l=z({avatar:"",nick_name:"",user_id:""}),C=async()=>{m.value=!0;const r=R(),_=await $.getUserPictureInfo(r),{pages:k,author:a,title:y,collect_total:o,like_total:n,desc:T,tags:U}=_;f.value=k.map(u=>(u.regular_url=u.regular_url.replace("http://","https://")+"?x-oss-process=image/resize,m_fill,w_1000",u)),I.value=f.value.map(u=>u.regular_url),t.title=y,t.collect_total=o,t.like_total=n,t.desc=T,t.tags=U.split(","),l.avatar=a.avatar,l.nick_name=a.nick_name,l.user_id=a.user_id,P.value=await V({picture_id:"112773104",user_id:a.user_id}),m.value=!1},R=()=>{const{pictureId:r}=B.params;return Array.isArray(r)?r[0]:r},P=v([]),V=async r=>{try{const{rows:_}=await $.getUserBestPicture(r);return _}catch{return[]}};C();const D=M(B,()=>{C()});return Y(()=>{D()}),(r,_)=>{const k=A("el-image"),a=A("router-link"),y=j("loading");return e(),i("div",O,[q((e(),i("div",Q,[s("div",X,[s("ul",Z,[(e(!0),i(x,null,w(f.value,(o,n)=>(e(),i("li",{key:n},[s("div",ss,[d(k,{class:"image",lazy:"",fit:"cover",src:o.regular_url,"zoom-rate":1.2,"max-scale":7,"min-scale":1,"initial-index":0,"preview-src-list":I.value},null,8,["src","preview-src-list"])])]))),128))])]),s("div",ts,[s("div",es,[s("h2",as,c(t.title),1),t.desc?(e(),i("div",{key:0,class:"illust-desc",innerHTML:t.desc},null,8,os)):L("",!0),s("span",is,c(g.translate),1),s("div",ls,[t.tags.length?(e(),i("ul",cs,[(e(!0),i(x,null,w(t.tags,(o,n)=>(e(),i("li",{key:n},[d(a,{class:"link",to:`/yixiv/search/tags/${o}`},{default:h(()=>[s("a",rs,"#"+c(o),1)]),_:2},1032,["to"])]))),128))])):L("",!0)]),s("ul",ns,[s("li",null,[_s,s("span",us,c(t.collect_total),1)]),s("li",null,[ds,s("span",hs,c(t.like_total),1)])])])])])),[[y,m.value]]),s("aside",ps,[s("section",vs,[d(a,{to:`/yixiv/author/${l.user_id}`},{default:h(()=>[s("span",gs,[s("img",{src:l.avatar},null,8,ms)])]),_:1},8,["to"]),s("div",fs,[s("h2",ks,[d(a,{to:`/yixiv/author/${l.user_id}`},{default:h(()=>[N(c(l.nick_name),1)]),_:1},8,["to"])]),s("p",{class:"desc ellipsis",textContent:c(l.user_id)},null,8,ys)])]),s("section",xs,[s("header",ws,[s("h5",null,c(g.otherWorks),1),d(a,{class:"more",to:`/yixiv/author/${l.user_id}`},{default:h(()=>[N(c(g.moreWorks),1)]),_:1},8,["to"])]),s("div",Bs,[s("ul",Is,[(e(!0),i(x,null,w(P.value,(o,n)=>(e(),i("li",{key:n},[(e(),E(a,{class:"link",key:o.picture_id,to:`/yixiv/illust/${o.picture_id}`},{default:h(()=>[s("img",{src:`${o.regular_url}?x-oss-process=image/resize,m_fill,w_450`},null,8,Cs)]),_:2},1032,["to"]))]))),128))])])])])])}}});const As=K(Ps,[["__scopeId","data-v-4cfcfd48"]]);export{As as default};
